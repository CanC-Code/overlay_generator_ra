<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RetroArch Overlay Editor — Redesigned</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">RetroArch Overlay Editor</div>
    <div class="subtitle">Redesigned — load .cfg, edit buttons, export ready ZIP</div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <section class="panel">
        <h3>Load / Export</h3>
        <label class="file">
          Load <code>.cfg</code>
          <input id="cfgInput" type="file" accept=".cfg" />
        </label>
        <label class="file">
          Add images
          <input id="imageFiles" type="file" accept="image/*" multiple />
        </label>

        <div class="row">
          <button id="btnAdd">+ Add Button</button>
          <button id="btnExportZip">Export ZIP</button>
        </div>

        <div class="row small">
          <label>Overlay image name<input id="overlayName" type="text" value="overlay.png" /></label>
          <label>Cfg name<input id="cfgName" type="text" value="overlay.cfg" /></label>
        </div>

        <hr />

        <div class="row small center">
          <button id="btnUndo">Undo</button>
          <button id="btnRedo">Redo</button>
          <button id="btnReset">Reset</button>
        </div>
      </section>

      <section class="panel">
        <h3>Selected</h3>
        <div id="selNone" class="muted">No selection</div>

        <div id="selProps" class="props" hidden>
          <label>Label <input id="pLabel" type="text" /></label>

          <label>Action
            <select id="pAction">
              <option value="save_state">save_state</option>
              <option value="load_state">load_state</option>
              <option value="toggle_fast_forward">toggle_fast_forward</option>
              <option value="toggle_slowmotion">toggle_slowmotion</option>
              <option value="menu_toggle">menu_toggle</option>
            </select>
            <input id="pActionCustom" placeholder="or custom action" />
          </label>

          <label>Image <input id="pImg" type="text" readonly /></label>
          <label>Replace image <input id="pReplaceFile" type="file" accept="image/*" /></label>

          <div class="coord-row">
            <label>X <input id="pX" type="number" step="0.01" min="0" max="1" /></label>
            <label>Y <input id="pY" type="number" step="0.01" min="0" max="1" /></label>
          </div>
          <div class="coord-row">
            <label>W <input id="pW" type="number" step="0.01" min="0.01" max="1" /></label>
            <label>H <input id="pH" type="number" step="0.01" min="0.01" max="1" /></label>
          </div>

          <div class="row small">
            <button id="btnDelete" class="danger">Delete</button>
            <button id="btnApply">Apply</button>
          </div>
        </div>
      </section>

      <section class="panel small muted">
        Tips: Drag corners to resize. Click button to select. Exported ZIP contains image files and the configured <code>.cfg</code>.
      </section>
    </aside>

    <section class="canvas-area">
      <div class="canvas-wrap">
        <canvas id="canvas" width="1280" height="720" aria-label="Overlay preview"></canvas>
        <div class="canvas-controls">
          <label>Preview: <select id="previewSize">
            <option value="1280x720">1280×720</option>
            <option value="1920x1080">1920×1080</option>
            <option value="800x600">800×600</option>
            <option value="custom">Custom</option>
          </select></label>
          <label id="customSizeLabel" hidden>W <input id="customW" type="number" value="1280" /> H <input id="customH" type="number" value="720" /></label>
          <label><input id="snap" type="checkbox" /> Snap to grid</label>
          <label>Grid <input id="gridSize" type="number" value="16" min="4" /></label>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <small>Drop this folder into GitHub Pages (static). Works in modern desktop/mobile browsers.</small>
  </footer>

  <!-- libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <script src="app.js"></script>
</body>
</html>
